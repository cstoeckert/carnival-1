<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Developer Setup - </title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Developer Setup</title> <meta name="generator" content="Jekyll v4.1.1" /> <meta property="og:title" content="Developer Setup" /> <meta property="og:locale" content="en_US" /> <script type="application/ld+json"> {"url":"/docs/developer-setup.html","@type":"WebPage","headline":"Developer Setup","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/" class="nav-list-link">Home</a><ul class="nav-list "><li class="nav-list-item active"><a href="/docs/developer-setup.html" class="nav-list-link active">Developer Setup</a></li><li class="nav-list-item "><a href="/docs/production-buids.html" class="nav-list-link">Production Builds</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/api/" class="nav-list-link">Application Programmer Interface</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/docs/api/data-tables/" class="nav-list-link">Data Tables</a><ul class="nav-list"><li class="nav-list-item "> <a href="/docs/api/data-tables/mapped-data-table.html" class="nav-list-link">Mapped Data Table</a> </li><li class="nav-list-item "> <a href="/docs/api/data-tables/generic-data-table.html" class="nav-list-link">Generic Data Table</a> </li></ul></li><li class="nav-list-item "><a href="/docs/api/vines/" class="nav-list-link">Vines</a></li><li class="nav-list-item "><a href="/docs/api/graph-model/" class="nav-list-link">Graph Model</a></li></ul></li><li class="nav-list-item"><a href="/about/" class="nav-list-link">About</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search " aria-label="Search " autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/">Home</a></li> <li class="breadcrumb-nav-list-item"><span>Developer Setup</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="developer-setup"> <a href="#developer-setup" aria-labelledby="developer-setup" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Developer Setup </h1> <p><em>This documentation is applicable for developing the core Carnival framework, not developing an application that uses Carnival.</em></p> <p><strong>Carnival</strong> is a <a href="https://groovy-lang.org">Groovy</a> multi-project that uses <a href="https://gradle.org">Gradle</a> as the build engine. The main project is in the app directory. Folders within app contain the sub-projects (eg. app/carnival-core). Every sub-project has a build.gradle configuration file that defines its dependencies and the gradle tasks that it can execute. The build.gradle file in the app directory defines project-wide configuration. Gradle task commands executed from the root project filter down to the sub-projects. Gradle commands referenced in this documentation are assumed to be called from the root project directory carnival/app unless otherwise noted. This project also includes a Docker image configuration that can be built to run the Carnival test suite.</p> <h2 id="installation"> <a href="#installation" aria-labelledby="installation" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Installation </h2> <h3 id="java-jdk"> <a href="#java-jdk" aria-labelledby="java-jdk" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Java JDK </h3> <p>If you do not already have one, install the Java JDK. We recommend <a href="https://aws.amazon.com/corretto/">Amazon Corretto</a>, Java 8 or above.</p> <h3 id="github"> <a href="#github" aria-labelledby="github" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Github </h3> <ol> <li>If you do not already have one, create a free account on <a href="https://github.com">Github</a>.</li> <li>Install <a href="https://desktop.github.com">Github Desktop</a>.</li> <li>Clone the <a href="https://github.com/pmbb-ibi/carnival">Carnival repository from Github</a>.</li> </ol> <h3 id="carnival-home"> <a href="#carnival-home" aria-labelledby="carnival-home" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Carnival Home </h3> <p>Set up a Carnival home directory, which will be used to contain data files and override the default Carnival configuration.</p> <ol> <li>Create an empty directory named <code class="language-plaintext highlighter-rouge">carnival_home</code>.</li> <li>Set an environment variable <code class="language-plaintext highlighter-rouge">CARNIVAL_HOME</code> to the <code class="language-plaintext highlighter-rouge">path/to/carnival_home</code>.</li> <li>Create an empty <code class="language-plaintext highlighter-rouge">config</code> directory in the the carnival home directory.</li> <li>Copy <code class="language-plaintext highlighter-rouge">application.yml-template</code> and <code class="language-plaintext highlighter-rouge">logback.yml-template</code> from <code class="language-plaintext highlighter-rouge">carnival/config</code> to <code class="language-plaintext highlighter-rouge">carnival_home/config</code>.</li> <li>Remove the <code class="language-plaintext highlighter-rouge">-template</code> file name suffix from each file.</li> </ol> <p><strong>Note</strong> - In the config files windows paths should be specified using double forward-slashes (i.e. <code class="language-plaintext highlighter-rouge">C://Users//myuser//somedirectory</code>).</p> <h4 id="configuration-files"> <a href="#configuration-files" aria-labelledby="configuration-files" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuration Files </h4> <p>Name | Description — | — application.yaml | Contains data source information (i.e. credentals to relational dbs, RDF dbs, REDCap, etc.), the default vine cache-mode, local directory configuration and the gremlin configuration. logback.xml | Can be modified to change the log levels.</p> <h3 id="neo4j-apoc-optional"> <a href="#neo4j-apoc-optional" aria-labelledby="neo4j-apoc-optional" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Neo4j APOC <em>(optional)</em> </h3> <p>Awesome Procedures on Cypher (APOC) is a library of Neo4j procedures. While Carnival does not depend on any of these procedures, it may be useful to install the library.</p> <ol> <li> <p>Download the most recent 3.5+ release from the <a href="https://github.com/neo4j-contrib/neo4j-apoc-procedures/releases">Neo4j Github</a>.</p> </li> <li> <p>Add the path to that directory in gremlin section of the application.yaml config file in the entry gremlin:neo4j:conf:dbms:directories:plugins:</p> </li> </ol> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># gremlin</span>
<span class="na">gremlin</span><span class="pi">:</span>
    <span class="na">neo4j</span><span class="pi">:</span>
        <span class="na">conf</span><span class="pi">:</span>
            <span class="na">dbms</span><span class="pi">:</span>
                <span class="na">directories</span><span class="pi">:</span>
                    <span class="na">plugins</span><span class="pi">:</span> <span class="s">/Users/myuser/Documents/Neo4j/default.graphdb/plugins</span>
                <span class="na">security</span><span class="pi">:</span>
                    <span class="na">auth_enabled</span><span class="pi">:</span> <span class="s2">"</span><span class="s">false"</span>
                    <span class="na">procedures</span><span class="pi">:</span>
                        <span class="na">unrestricted</span><span class="pi">:</span> <span class="s">apoc.*</span>
                        <span class="na">whitelist</span><span class="pi">:</span> <span class="s">apoc.*</span>
</code></pre></div></div> <h3 id="installation-test"> <a href="#installation-test" aria-labelledby="installation-test" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Installation Test </h3> <ol> <li>Open a Command Prompt.</li> <li><code class="language-plaintext highlighter-rouge">cd</code> to the carnival repository directory.</li> <li><code class="language-plaintext highlighter-rouge">cd app</code></li> <li><code class="language-plaintext highlighter-rouge">gradlew clean</code></li> <li><code class="language-plaintext highlighter-rouge">gradlew compileGroovy</code></li> </ol> <h2 id="compiling"> <a href="#compiling" aria-labelledby="compiling" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Compiling </h2> <p>Carnival can be built by running gradle compileGroovy . The build can be cleaned by running gradle clean . To run sub-project tasks, use the gradle colon syntax: gradle :carnival- util:compileGroovy .</p> <h2 id="testing"> <a href="#testing" aria-labelledby="testing" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Testing </h2> <p>Gradle is used to execute the test suite. Running tests produces html test result files in the sub-project directories <code class="language-plaintext highlighter-rouge">carnvial\app\carnival-\*\build\reports\tests\test\index.html</code> .</p> <h3 id="aggregating-test-results"> <a href="#aggregating-test-results" aria-labelledby="aggregating-test-results" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Aggregating Test Results </h3> <p>Running the command gradle testReport will run all tests and generate aggregated results in <code class="language-plaintext highlighter-rouge">carnival\app\build\reports\allTests</code> .</p> <h3 id="common-test-commands"> <a href="#common-test-commands" aria-labelledby="common-test-commands" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Common Test Commands </h3> <p>To run tests for all gradle sub-projects: <code class="language-plaintext highlighter-rouge">gradlew test</code> To run tests for all gradle sub-projects and aggrigate the results: <code class="language-plaintext highlighter-rouge">gradlew testReport</code> To run tests in a specific gradle sub-project: <code class="language-plaintext highlighter-rouge">gradlew :carnival-util:test</code> To run a specific test suite, in this example the tests located in <code class="language-plaintext highlighter-rouge">carnival\app\carnival-graph/src/test/groovy/carnival/graph/VertexDefTraitSpec.groovy</code> : <code class="language-plaintext highlighter-rouge">gradle :carnival-graph:test --tests "carnival.graph.VertexDefTraitSpec"</code></p> <h3 id="http-tests"> <a href="#http-tests" aria-labelledby="http-tests" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> HTTP Tests </h3> <p>Some of the tests require external HTTP resources. To run these tests: <code class="language-plaintext highlighter-rouge">gradlew -Dtest-http=true :carnival-core:test</code></p> <h3 id="running-tests-using-docker"> <a href="#running-tests-using-docker" aria-labelledby="running-tests-using-docker" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running Tests using Docker </h3> <p>The test suite can be run in the context of a docker image. If running tests in this way gradle does not need to be installed, and any configuration in the users CARNIVAL_HOME directory will be ignored.</p> <h2 id="docker"> <a href="#docker" aria-labelledby="docker" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Docker </h2> <p>Most recent stable release, minimum version is 17.06.0 Official Docker Website Getting Started Official Docker Installation for Windows Docker-Compose (Version 1.22.0 or greater, Linux only) - Separate installation is only needed for linux, docker-compose is bundled with windows and mac docker installations Linux Docker-Compose Installation</p> <h3 id="running-tests-in-the-docker-environment"> <a href="#running-tests-in-the-docker-environment" aria-labelledby="running-tests-in-the-docker-environment" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running Tests in the Docker Environment </h3> <p>First build the docker image using the command: <code class="language-plaintext highlighter-rouge">docker-compose -f .\docker-compose-test.yml build</code> Once built, the tests can be run using the command: <code class="language-plaintext highlighter-rouge">docker-compose -f .\docker-compose-test.yml up --force-recreate</code> This has the same effect as running gradle testReports, and the aggregated test results will be in the folder <code class="language-plaintext highlighter-rouge">carnival\app\build\reports\allTests</code> .</p> <h2 id="publishing-libraries-to-local-maven-repository"> <a href="#publishing-libraries-to-local-maven-repository" aria-labelledby="publishing-libraries-to-local-maven-repository" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Publishing Libraries to Local Maven Repository </h2> <p>The Groovy sub-project modules can be published to local maven repositories by running commands like the following:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gradlew :carnival-util:publishToMavenLocal
gradlew :carnival-core:publishToMavenLocal
</code></pre></div></div> <p>To publish all modules:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gradlew publishAll
</code></pre></div></div> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
